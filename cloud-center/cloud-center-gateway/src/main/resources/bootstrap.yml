server:
  port: 8765

spring:
  application:
    name: gateway
  cloud:
    gateway:
      discovery:
        locator:
          enabled: true
      routes:
        - id: park-provider
          uri: lb://park-provider
          predicates:
            - Path= /park-provider/**
          filters:
            - StripPrefix= 1

        - id: boss
          uri: lb://boss
          predicates:
            - Path= /boss/**
          filters:
            - StripPrefix= 1
            # 增加自定义过滤器
            - name: Boss
              args:
                status: boss-test
      # 默认过滤器
      default-filters:
        # 重试过滤器 默认重试3次
        - Retry
        # 熔断器超时过滤器
        - name: Hystrix
          args:
            name: fallbackcmd
            fallbackUri: forward:/error/defaultfallback

eureka:
  instance:
    hostname: localhost
    # 设置心跳的时间间隔（默认是30秒）
    lease-renewal-interval-in-seconds: 5
    # 续约到期时间（默认90秒）
    lease-expiration-duration-in-seconds: 10
  client:
    serviceUrl:
      defaultZone: http://localhost:8761/eureka/
    # 客户端拉取服务注册信息间隔，单位：秒，缺省：30
    registry-fetch-interval-seconds: 5
    # Eureka服务端连接空闲时的关闭时间，单位：秒，缺省：30
    eureka-connection-idle-timeout-seconds: 30
    # 连接Eureka服务器的超时时间，单位：秒，缺省：5
    eureka-server-connect-timeout-seconds: 5
    # 从Eureka服务器读取信息的超时时间，单位：秒，缺省：8
    eureka-server-read-timeout-seconds: 8

# hystrix 信号量隔离，3秒后自动超时
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 3000
  shareSecurityContext: true